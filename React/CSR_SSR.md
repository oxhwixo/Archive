# CSR, SSR



## 웹 의 간단한 역사

1. 1990 중반까지 : 정적 사이트

   서버에 html 문서들이 있고 사용자가 접속하면 서버에 배포된 문서를 받아오는 형식. 새로운 데이터를 업데이트 해주려면 다시 서버에서 html을 가져와서 페이지 전체가 업데이트 해야했다.

2. 1996 : iframe 태그 등장

   페이지내에서 부분적으로 문서를 받아와서 업데이트할 수 있게 됨

3. 1998 : XMLHttpRequest 등장

   HTML 문서 전체가 아니라 json같은 형태로 서버에서 가볍게 필요한 데이터만 받아올 수 있게 됨. 받아온 데이터를 자바스크립트를 이용해서 동적으로 업데이트가 가능해졌다.

4. 2005 : AJAX - SPA 

   XMLHttpRequest API같이 서버에서 데이터를 가져와 업데이트하는 것이 AJAX라는 이름을 갖게 되었음. 사용자가 한 페이지에 머물면서 필요한 데이터를 서버에서 받아와 부분적으로 업데이트되는 웹사이트를 사용 가능해짐. 



## CSR

이후 SPA 트렌드 + PC성능 업그레이드 + 자바스크립트 표준화 + 강력한 커뮤니티를 바탕으로 CSR렌더링의 시대 도래

서버에서 웹서비스를 동작하는데 필요한 모든 로직이 담긴 파일을 웹사이트에 전달해서 그것을 기반으로 동적으로 html을 생성하는 렌더링 방식. index.html 파일은 비어있고 javascript 로직이 html을 구성한다. 모든 파일을 사용자측으로 보내야 하기 때문에 사용자가 첫 화면을 보기까지 시간이 오래걸릴 수 있으며 검색엔진최적화에 불리하다. 검색엔진은 웹사이트의 html문서를 분석해서 (타이틀, 디스크립션등) 사용자가 검색을했을 때 보여지게끔 하는데 CSR에서 사용되는 html의 바디는 대부분 비어져있기때문에 검색엔진최적화에 불리하다.



## SSR

CSR의 문제점들로 인해 정적 사이트에서 영감을 받아 등장한 SSR 도입. 클라이언트에서 모든 것을 처리하는 방식과는 다르게 웹사이트에 접속하면 서버에서 필요한 데이터를 모두 가져와서 Html파일을 만들고 html 파일과 파일을 동적으로 조금 제어할 수 있는 자바스크립트 소스코드를 함께 클라이언트에게 보낸다. 클라이언트는 문서를 받아서 바로 사용자에게 보여줄 수 있다. 

페이지 로딩이 빨라지는 장점과 효율적인 검색엔진최적화라는 장점이 있다.

하지만 정적사이트에서 발생했던 깜빡임이슈, 사용자가 많은 서비스일 수록 서버 과부화 문제, 사용자가 자바스크립트 파일을 아직 다운로드 받지 못한 상태에서 자바스크립트 파일이 필요한 기능을 사용하게되는 문제점등이 있다.

이때 TTV, TTI 개념을 잘 살펴볼 필요가 있다.



## TTV, TTI

csr과 ssr을 시간이 흘러가는대로 분석해보자.

### CSR

1. 사이트 접속
2. 서버에서 index.html 파일 받아옴 (텅텅 비어있음)
   사용자는 아무것도 볼 수 없음
3. 이 사이트에 필요한 모든 로직이 필요한 자바스크립트 요청
4. 동적으로 html을 생성할 수 있는 웹 어플리케이션 로직이 담긴 자바스크립트 파일 받아옴
5. 사용자가 웹사이트 볼수있음과 동시에 인터렉션 가능 TTV = TTI

### SSR

1. 사이트 접속
2. 서버에서 이미 완성된 index.html 파일 받아옴
3. 사용자가 웹사이트를 볼 수 있지만 아직 자바스크립트 다운로드중이라 사용자가 클릭을 해도 동적인 변화 없음 TTV
4. 자바스크립트 다운로드 완료되면 인터렉션 가능 TTI

--> 사용자가 사이트를 볼 수 있는 시간과 인터렉션이 가능한 시간 사이에 공백이 꽤 길어질 수 있음



TTV와 TTI는 웹 사이트의 성능을 판단하는데 중요한 지표가 된다.